rbenv_version() {
  rbenv version 2>/dev/null | awk '{print $1}'
}

crenv_version() {
  crenv version 2>/dev/null | awk '{print $1}'
}

goenv_version() {
  goenv version 2>/dev/null | awk '{print $1}'
}

ndenv_version() {
  ndenv version 2>/dev/null | awk '{print $1}'
}

jenv_version() {
  jenv version 2>/dev/null | awk '{print $1}'
}

autoload -Uz VCS_INFO_get_data_git && VCS_INFO_get_data_git 2> /dev/null
# プロンプトが表示されるたびにプロンプト文字列を評価、置換する
setopt PROMPT_SUBST

PROMPT_GIT='`git-current-branch`'

fg256() {
  echo -n "\e[38;5;"$1"m$2\e[m"
}

test_fg256() {
  for c in {000..255}; do echo -n "\e[38;5;${c}m $c" ; [ $(($c%16)) -eq 15 ] && echo;done;echo
}

RBENV="r:$(rbenv_version)"
CRENV="c:$(crenv_version)"
GOENV="g:$(goenv_version)"
NDENV="n:$(ndenv_version)"
JENV="j:$(jenv_version)"

USER_HOST="$(fg256 075 '%n')${YELLOW_B}@${RESET}$(fg256 120 '%m')"
PROMPT_ROLE="${CYAN_B}%(!.#.$) >${RESET}"

PROMPT="
${USER_HOST} $(fg256 214 '%~')${PROMPT_GIT} $(fg256 169 ${RBENV}) $(fg256 003 ${CRENV}) $(fg256 222 ${GOENV}) $(fg256 047 ${NDENV}) $(fg256 012 ${JENV})
${PROMPT_ROLE} "
